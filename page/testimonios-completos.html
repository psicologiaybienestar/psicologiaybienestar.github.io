<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Todos los Comentarios - Psicología & Bienestar</title>
    <link rel="icon" type="image/png" href="/assets/logo-ico.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@splidejs/splide@4.1.3/dist/js/splide.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/@splidejs/splide@4.1.3/dist/css/splide.min.css" />
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .perspective {
            perspective: 1000px;
        }

        .transform-style-preserve-3d {
            transform-style: preserve-3d;
        }

        .backface-hidden {
            backface-visibility: hidden;
        }

        .rotate-y-180 {
            transform: rotateY(180deg);
        }

        .overflow-y-auto::-webkit-scrollbar {
            display: none;
            /* oculta scroll en caso de desborde */
        }

        html {
            scroll-behavior: smooth;
        }

        @font-face {
            font-family: "Sego Serif";
            src: url("/fonts/sego-serif.ttf") format("truetype");
            font-weight: normal;
            font-style: normal;
        }

        .font-sego {
            font-family: "Sego Serif", serif;
        }
    </style>
    <script>
        // Recargar la página al hacer clic en los enlaces a Inicio
        const inicioLinks = document.querySelectorAll('a[href="index.html"]');
        inicioLinks.forEach(link => {
            link.addEventListener('click', (event) => {
                window.location.reload(true);
            });
        });

        // Recargar la página al hacer clic en el enlace a Servicios Empresariales
        const serviciosEmpresarialesLink = document.querySelector('a[href="servicios-empresariales.html"]');
        if (serviciosEmpresarialesLink) {
            serviciosEmpresarialesLink.addEventListener('click', (event) => {
                window.location.reload(true);
            });
        }
        // Recargar la página al hacer clic en el enlace a Testimonios Completos
        const testimoniosCompletosLink = document.querySelector('a[href="page/testimonios-completos.html"]');
        if (testimoniosCompletosLink) {
            testimoniosCompletosLink.addEventListener('click', (event) => {
                window.location.reload(true); // Forzar la recarga desde el servidor
            });
        }
    </script>
    <!-- adsense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5397310873335886"
        crossorigin="anonymous"></script>
</head>

<body class="bg-white text-gray-800">

    <header class="bg-[#66a6da] text-white shadow fixed w-full top-0 z-50">
        <div class="container mx-auto flex justify-between items-center p-4">
            <div class="flex items-center space-x-2">
                <img src="/assets/logo.png" alt="Logo Empresa" class="h-10 w-10" />
                <span class="text-xl font-bold font-sego">Psicología & Bienestar</span>
            </div>

            <button id="menu-toggle" class="md:hidden focus:outline-none">
                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16">
                    </path>
                </svg>
            </button>

            <nav id="menu" class="hidden md:flex space-x-4 text-sm font-semibold">
                <a href="/index.html" class="hover:text-gray-200">Inicio</a>
                <a href="/index.html#nosotros" class="hover:text-gray-200">Nosotros</a>
                <a href="/index.html#servicios" class="hover:text-gray-200">Servicios</a>
                <a href="/index.html#equipo" class="hover:text-gray-200">Equipo</a>
                <a href="#contacto" class="hover:text-gray-200">Contacto</a>
            </nav>
        </div>

        <div id="mobile-menu" class="md:hidden hidden bg-[#66a6da] px-4 pb-4">
            <a href="/index.html" class="block py-2 hover:text-gray-200">Inicio</a>
            <a href="/index.html#nosotros" class="block py-2 hover:text-gray-200">Nosotros</a>
            <a href="/index.html#servicios" class="block py-2 hover:text-gray-200">Servicios</a>
            <a href="/index.html#equipo" class="block py-2 hover:text-gray-200">Equipo</a>
            <a href="#contacto" class="block py-2 hover:text-gray-200">Contacto</a>
        </div>
    </header>

    <section class="py-20 px-6 md:px-20 bg-[#f4f9ff] mt-16" id="servicios-empresariales">
        <h2 class="text-3xl md:text-4xl font-bold text-center text-[#627eff] mb-6">
            Comentarios de Nuestros Clientes
        </h2>

        <div id="all-testimonials-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mt-10">
            <!-- Testimonials will be loaded here by JavaScript -->
        </div>

        <div class="text-center mt-10">
            <a href="/index.html"
                class="inline-block bg-[#627eff] text-white py-2 px-6 rounded-lg shadow hover:bg-[#53c6e4] transition">
                ← Volver a Inicio
            </a>
        </div>
    </section>


    <div class="mt-20 max-w-2xl mx-auto bg-white shadow-lg rounded-xl p-6 scroll-mt-20" id="contacto">
        <h2 class="text-2xl font-semibold text-[#627eff] mb-4 text-center">Contáctanos</h2>

        <div id="successMessage"
            class="hidden text-green-700 bg-green-100 border border-green-300 rounded-lg px-4 py-3 mb-4 text-center">
            ¡Gracias por contactarnos! Tu mensaje fue enviado exitosamente.
        </div>

        <form id="contactForm" action="https://formspree.io/f/mblgpnvb" method="POST" class="space-y-4">
            <div>
                <label class="block text-sm font-medium">Nombre</label>
                <input type="text" name="nombre" required
                    class="w-full mt-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#66a6da]" />
            </div>
            <div>
                <label class="block text-sm font-medium">Correo electrónico</label>
                <input type="email" name="email" required
                    class="w-full mt-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#66a6da]" />
            </div>
            <div>
                <label class="block text-sm font-medium">Teléfono</label>
                <input type="tel" name="telefono" pattern="[0-9+ ]+" placeholder="+57 300 123 4567" required
                    class="w-full mt-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#66a6da]" />
            </div>
            <div>
                <label class="block text-sm font-medium">Mensaje</label>
                <textarea name="mensaje" rows="4" required
                    class="w-full mt-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#66a6da]"></textarea>
            </div>
            <button type="submit"
                class="bg-[#627eff] hover:bg-[#53c6e4] text-white px-6 py-2 rounded-lg transition w-full">
                Enviar mensaje
            </button>
        </form>
    </div>

    <footer class="bg-[#66a6da] text-white text-center py-8 mt-12">
        <div class="container mx-auto">
            <p class="font-sego text-sm mb-2">Psicología & Bienestar © 2025. Todos los derechos reservados.</p>
        </div>
    </footer>

    <div class="fixed top-1/3 left-0 z-40 flex flex-col space-y-3 px-2">
        <a href="https://www.instagram.com/serviciospsicobienestar?utm_source=qr&igsh=NmtoOWFqMnZwMHY1" target="_blank"
            class="group relative flex items-center">
            <div class="bg-pink-500 hover:bg-pink-600 p-3 rounded-r-full shadow-lg transition duration-300">
                <img src="https://cdn.jsdelivr.net/npm/simple-icons@v10/icons/instagram.svg" alt="Instagram"
                    class="w-5 h-5" />
            </div>
            <span
                class="absolute left-12 bg-pink-500 text-white text-xs px-3 py-1 rounded shadow-lg opacity-0 scale-0 group-hover:opacity-100 group-hover:scale-100 transform transition-all duration-300 origin-left whitespace-nowrap">
                Visita nuestro Instagram
            </span>
        </a>

        <a href="https://www.facebook.com/share/1A9WZs7XCb/" target="_blank" class="group relative flex items-center">
            <div class="bg-blue-600 hover:bg-blue-700 p-3 rounded-r-full shadow-lg transition duration-300">
                <img src="https://cdn.jsdelivr.net/npm/simple-icons@v10/icons/facebook.svg" alt="Facebook"
                    class="w-5 h-5" />
            </div>
            <span
                class="absolute left-12 bg-blue-600 text-white text-xs px-3 py-1 rounded shadow-lg opacity-0 scale-0 group-hover:opacity-100 group-hover:scale-100 transform transition-all duration-300 origin-left whitespace-nowrap">
                Visita nuestro Facebook
            </span>
        </a>
    </div>

    <a href="https://wa.me/573164603881" target="_blank" class="fixed bottom-6 right-6 z-50 group">
        <div
            class="relative flex items-center justify-center bg-[#25D366] hover:bg-green-600 w-14 h-14 rounded-full shadow-lg transition-colors duration-300">
            <img src="https://cdn.jsdelivr.net/npm/simple-icons@v10/icons/whatsapp.svg" alt="WhatsApp"
                class="w-7 h-7 text-white" />
            <span
                class="absolute right-16 bg-[#25D366] text-white text-sm px-3 py-1 rounded-lg shadow-lg opacity-0 scale-0 group-hover:opacity-100 group-hover:scale-100 transform transition-all duration-300 origin-right whitespace-nowrap">
                Escríbenos por WhatsApp
            </span>
        </div>
    </a>

    <script>
        const form = document.getElementById("contactForm");
        const successMessage = document.getElementById("successMessage");

        form.addEventListener("submit", async (e) => {
            e.preventDefault();
            const data = new FormData(form);
            const action = form.getAttribute("action");

            const response = await fetch(action, {
                method: "POST",
                body: data,
                headers: {
                    Accept: "application/json",
                },
            });

            if (response.ok) {
                form.reset();
                successMessage.classList.remove("hidden");
                setTimeout(() => {
                    successMessage.classList.add("hidden");
                }, 5000);
            }
        });
    </script>
    <script>
        const menuToggle = document.getElementById("menu-toggle");
        const mobileMenu = document.getElementById("mobile-menu");
        const mobileMenuItems = document.querySelectorAll("#mobile-menu a"); // Selector corregido

        menuToggle.addEventListener("click", () => {
            mobileMenu.classList.toggle("hidden");
        });

        mobileMenuItems.forEach(item => {
            item.addEventListener("click", () => {
                if (window.innerWidth < 768) {
                    mobileMenu.classList.add("hidden");
                }
            });
        });
    </script>

<script>
    const googleSheetURL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQ9gc0iLBVHnuWopuxijsTupBn_tvZ-B7D3b4WBVZ-meyKF61a8o24Qy1FQ5fxUYL7DaabkkAgILjac/pub?gid=421205038&single=true&output=csv';
    // Apuntamos al contenedor correcto en esta página
    const allTestimonialsContainer = document.getElementById('all-testimonials-container');

    document.addEventListener('DOMContentLoaded', function() {
        if (!allTestimonialsContainer) {
            console.error("Error: Elemento con ID 'all-testimonials-container' no encontrado en testimonios-completos.html");
            return;
        }

        fetch(googleSheetURL)
            .then(response => response.text())
            .then(csvData => {
                const rows = csvData.split('\n').map(row => row.trim());
                if (rows.length <= 1) {
                    allTestimonialsContainer.innerHTML = '<p>No hay testimonios disponibles.</p>';
                    return;
                }

                // Mantenemos la lógica de lectura de encabezados y parsing CSV mejorada
                const headers = rows[0].split(',').map(header => header.trim());
                const nombreIndex = headers.indexOf('Nombre Completo');
                const testimonioIndex = headers.indexOf('Tu Testimonio');
                const calificacionIndex = headers.indexOf('Calificación');
                const fechaIndex = headers.indexOf('Fecha');

                console.log("Encabezados detectados:", headers);
                console.log("Índice Nombre Completo:", nombreIndex);
                console.log("Índice Tu Testimonio:", testimonioIndex);
                console.log("Índice Calificación:", calificacionIndex);
                console.log("Índice Fecha:", fechaIndex);


                if (nombreIndex === -1 || testimonioIndex === -1 || calificacionIndex === -1 || fechaIndex === -1) {
                    console.error('Las columnas necesarias no se encontraron en el CSV.');
                    allTestimonialsContainer.innerHTML = '<p class="text-red-500">Error al leer los testimonios (columnas no encontradas).</p>';
                    return;
                }

                let testimonialsHTML = ''; // Acumularemos el HTML de todos los testimonios aquí

                for (let i = 1; i < rows.length; i++) {
                     const row = rows[i];
                     if (!row) continue; // Saltar filas vacías

                     // Intentar parsear la fila CSV manualmente para manejar comas dentro de comillas dobles
                     const values = [];
                     let inQuotes = false;
                     let currentValue = '';
                     for (let j = 0; j < row.length; j++) {
                         const char = row[j];
                         if (char === '"' && (j === 0 || row[j-1] === ',' || /\s/.test(row[j-1]))) {
                             inQuotes = true;
                             continue;
                         }
                          if (char === '"' && (j === row.length - 1 || row[j+1] === ',' || /\s/.test(row[j+1]))) {
                             inQuotes = false;
                             continue;
                         }
                         if (char === ',' && !inQuotes) {
                             values.push(currentValue.trim());
                             currentValue = '';
                         } else {
                             currentValue += char;
                         }
                     }
                     values.push(currentValue.trim()); // Añadir el último valor trimado


                    if (values.length > Math.max(nombreIndex, testimonioIndex, calificacionIndex, fechaIndex) &&
                        nombreIndex !== -1 && testimonioIndex !== -1 && calificacionIndex !== -1 && fechaIndex !== -1) {

                        const testimonioData = {};
                        testimonioData["Nombre Completo"] = values[nombreIndex];
                        testimonioData["Tu Testimonio"] = values[testimonioIndex];
                        testimonioData["Calificación"] = values[calificacionIndex];
                        testimonioData["Fecha"] = values[fechaIndex];

                        console.log("Datos del testimonio (fila", i, "):", testimonioData);

                        // --- Generar HTML para una sola tarjeta de testimonio ---
                        const fechaStr = testimonioData["Fecha"];
                        let formattedDate = 'Fecha Inválida';
                        if (fechaStr) {
                             const parts = fechaStr.split('/');
                             if (parts.length === 3) {
                                  const day = parseInt(parts[0]);
                                  const month = parseInt(parts[1]) - 1; // JavaScript months are 0-indexed
                                  const year = parseInt(parts[2]);
                                  const date = new Date(year, month, day);
                                  if (!isNaN(date.getTime())) { // Verificar si la fecha es válida
                                       formattedDate = date.toLocaleDateString('es-CO', { year: 'numeric', month: 'numeric', day: 'numeric' });
                                  } else {
                                       console.error("Fecha inválida construida desde partes:", fechaStr);
                                  }
                             } else {
                                  console.error("Formato de fecha incorrecto al dividir:", fechaStr);
                             }
                        } else {
                             console.warn("La cadena de fecha está vacía para un testimonio.");
                        }

                        let ratingDisplay = '';
                        const ratingValue = testimonioData["Calificación"];
                        if (ratingValue && !isNaN(parseInt(ratingValue))) {
                             const numStars = parseInt(ratingValue);
                             for (let k = 0; k < numStars; k++) { // Usar 'k' para evitar conflicto con el bucle externo 'i' y 'j'
                                  ratingDisplay += '★';
                             }
                        } else if (ratingValue) {
                             ratingDisplay = ratingValue;
                        }

                        // Usamos las mismas clases de estilo que en el carrusel
                        testimonialsHTML += `
                            <div class="bg-gray-100 rounded-lg p-6 shadow-md"> {/* Ya no necesita flex-1 aquí, el grid se encarga del diseño */}
                                <div class="flex justify-between items-center mb-2">
                                    <p class="text-sm font-semibold text-[#627eff]">- ${testimonioData["Nombre Completo"]}</p>
                                    ${ratingDisplay ? `<div class="text-yellow-500">${ratingDisplay}</div>` : ''}
                                </div>
                                <p class="text-gray-700 italic mb-2"><span class="math-inline">\{testimonioData\["Tu Testimonio"\]\}</p\>
<p class\="text\-xs text\-gray\-500"\></span>{formattedDate}</p>
                            </div>
                        `;
                         // --- Fin Generar HTML ---

                    } else {
                        console.warn("Saltando fila con datos incompletos, índices inválidos o error de parseo:", row);
                    }
                }

                 // Insertar todo el HTML generado en el contenedor
                allTestimonialsContainer.innerHTML = testimonialsHTML;

            })
            .catch(error => {
                console.error('Error al obtener los testimonios desde Google Sheets (CSV):', error);
                if (allTestimonialsContainer) {
                    allTestimonialsContainer.innerHTML = '<p class="text-red-500">No se pudieron cargar los testimonios (error de red o CSV).</p>';
                }
            });
    });
</script>

</body>

</html>