<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Psicología & Bienestar</title>
    <link rel="icon" type="image/png" href="assets/logo-ico.png">

    <link rel="icon" href="assets/logo.png" />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .perspective {
            perspective: 1000px;
        }

        .transform-style-preserve-3d {
            transform-style: preserve-3d;
        }

        .backface-hidden {
            backface-visibility: hidden;
        }

        .rotate-y-180 {
            transform: rotateY(180deg);
        }

        .overflow-y-auto::-webkit-scrollbar {
            display: none;
            /* oculta scroll en caso de desborde */
        }

        @font-face {
            font-family: "Sego Serif";
            src: url("fonts/sego-serif.ttf") format("truetype");
            font-weight: normal;
            font-style: normal;
        }

        .font-sego {
            font-family: "Sego Serif", serif;
        }

        html {
            scroll-behavior: smooth;
        }

        /* tarjetas */

        .group:hover .transition-transform {
            transform: rotateY(180deg);
        }

        .pulse {
            animation: pulse-animation 1.5s infinite alternate;
        }

        @keyframes pulse-animation {
            0% {
                transform: scale(1);
            }

            100% {
                transform: scale(1.02);
                /* Un pulso más sutil */
            }
        }

        /* Estilos Adaptados para el Carrusel de Testimonios en index.html */

        /* Contenedor principal del carrusel - solo necesita overflow hidden */
        #carousel-container {
            overflow: hidden;
        }

        /* Wrapper del carrusel - el JS y Tailwind manejan display: flex, transform, gap, mb */
        #carousel-wrapper {
            transition: transform 0.3s ease-in-out;
            /* Mantén la transición para el desplazamiento */
            /* Las clases de Tailwind (flex, gap-6, mb-4) en las filas generadas por JS manejan el layout */
            /* justify-content: center; Esto lo puedes controlar con clases de Tailwind si es necesario en el contenedor padre del wrapper */
            /* padding: 1rem 0; Si necesitas espacio vertical alrededor del carrusel, ajusta el padding/margin de la sección o un div contenedor */
        }

        /* Estilo para cada tarjeta de testimonio */
        /* Las clases de Tailwind (flex-1, flex-shrink-0, w-full) manejan el tamaño y cómo se contraen/expanden */
        .bg-gray-100 {
            padding: 1rem;
            /* Mantén el padding interno */
            box-sizing: border-box;
            /* Crucial para que el padding y borde no aumenten el tamaño total */
            border: 1px solid #e2e8f0;
            /* Mantén el borde */
            border-radius: 0.5rem;
            /* Mantén las esquinas redondeadas */
            /* Los márgenes entre tarjetas están controlados por gap-6 en las filas flex y mb-4 entre filas/items individuales */
        }

        /* No necesitas reglas específicas de flex-basis, max-width o margin-right para .bg-gray-100 aquí si confías en Tailwind y el JS */
        /* No necesitas reglas :last-child para margin-right si usas gap */


        /* Estilos para los botones de navegación del carrusel */
        #prev-testimonial,
        #next-testimonial {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: #627eff;
            /* Mantén el color de fondo */
            color: white;
            /* Mantén el color del texto */
            border: none;
            padding: 0.75rem 1rem;
            /* Mantén el padding */
            border-radius: 0.5rem;
            /* Mantén las esquinas redondeadas */
            cursor: pointer;
            z-index: 20;
            opacity: 0.9;
            transition: opacity 0.2s ease-in-out;
            /* Mantén la transición al pasar el ratón */
            font-size: 1rem;
            font-weight: bold;
            /* La posición (left/right) está controlada por las clases de Tailwind en el HTML (left-0/md:left-2, right-0/md:right-2) */
            /* Elimina las reglas 'left' y 'right' de aquí para evitar conflictos */
            /* left: 20px; */
            /* right: 20px; */
        }

        #prev-testimonial:hover,
        #next-testimonial:hover {
            opacity: 1;
        }
    </style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script>
        // Recargar la página al hacer clic en los enlaces a Inicio
        const inicioLinks = document.querySelectorAll('a[href="index.html"]');
        inicioLinks.forEach(link => {
            link.addEventListener('click', (event) => {
                // Opcional: Evitar el comportamiento predeterminado del enlace (navegación sin recarga)
                // event.preventDefault();
                window.location.reload(true); // El 'true' fuerza una recarga desde el servidor
            });
        });

        // Recargar la página al hacer clic en el enlace a Servicios Empresariales
        const serviciosEmpresarialesLink = document.querySelector('a[href="servicios-empresariales.html"]');
        if (serviciosEmpresarialesLink) {
            serviciosEmpresarialesLink.addEventListener('click', (event) => {
                // Opcional: Evitar el comportamiento predeterminado del enlace
                // event.preventDefault();
                window.location.reload(true);
            });
        }
        // Recargar la página al hacer clic en el enlace a Testimonios Completos
        const testimoniosCompletosLink = document.querySelector('a[href="page/testimonios-completos.html"]');
        if (testimoniosCompletosLink) {
            testimoniosCompletosLink.addEventListener('click', (event) => {
                window.location.reload(true); // Forzar la recarga desde el servidor
            });
        }
    </script>
    <!-- adsense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5397310873335886"
        crossorigin="anonymous"></script>
</head>

<body class="bg-white text-gray-800">

    <header class="bg-[#66a6da] text-white shadow-md fixed w-full top-0 z-50 border-b border-gray-200">
        <div class="container mx-auto flex justify-between items-center p-4">
            <div class="flex items-center">
                <img src="assets/logo.png" alt="Logo Psicología y Bienestar" class="h-10 w-10 mr-2">
                <h1 class="text-xl font-bold font-sego lg:text-2xl">Psicología & Bienestar</h1>
            </div>
            <nav id="menu" class="hidden md:flex space-x-4 text-sm font-semibold">
                <a href="#inicio" class="hover:bg-white/10 hover:rounded py-2 px-3 transition duration-300">Inicio</a>
                <a href="#nosotros" class="hover:bg-white/10 hover:rounded py-2 px-3 transition duration-300">Sobre
                    Nosotros</a>
                <a href="#servicios"
                    class="hover:bg-white/10 hover:rounded py-2 px-3 transition duration-300">Servicios</a>
                <a href="#equipo" class="hover:bg-white/10 hover:rounded py-2 px-3 transition duration-300">Equipo</a>
                <a href="#contacto"
                    class="hover:bg-white/10 hover:rounded py-2 px-3 transition duration-300">Contacto</a>
            </nav>
            <button id="menu-toggle" class="md:hidden focus:outline-none">
                <svg class="w-6 h-6 fill-current text-white" viewBox="0 0 24 24">
                    <path v-if="!isOpen" fill-rule="evenodd" clip-rule="evenodd"
                        d="M4 6H20V8H4V6ZM4 11H20V13H4V11ZM4 16H20V18H4V16Z" />
                    <path v-if="isOpen" fill-rule="evenodd" clip-rule="evenodd"
                        d="M6.29289 6.29289C6.68342 5.90237 7.31658 5.90237 7.70711 6.29289L12 10.5858L16.2929 6.29289C16.6834 5.90237 17.3166 5.90237 17.7071 6.29289C18.0976 6.68342 18.0976 7.31658 17.7071 7.70711L13.4142 12L17.7071 16.2929C18.0976 16.6834 18.0976 17.3166 17.7071 17.7071C17.3166 18.0976 16.6834 18.0976 16.2929 17.7071L12 13.4142L7.70711 17.7071C7.31658 18.0976 6.68342 18.0976 6.29289 17.7071C5.90237 17.3166 5.90237 16.6834 6.29289 16.2929L10.5858 12L6.29289 7.70711C5.90237 7.31658 5.90237 6.68342 6.29289 6.29289Z" />
                </svg>
            </button>
        </div>

        <div id="mobile-menu" class="md:hidden hidden bg-[#66a6da] px-4 pb-4">
            <a href="#inicio" class="block py-2 hover:text-gray-200">Inicio</a>
            <a href="#nosotros" class="block py-2 hover:text-gray-200">Sobre Nosotros</a>
            <a href="#servicios" class="block py-2 hover:text-gray-200">Servicios</a>
            <a href="#equipo" class="block py-2 hover:text-gray-200">Equipo</a>
            <a href="#contacto" class="block py-2 hover:text-gray-200">Contacto</a>
        </div>
    </header>


    <section id="inicio" class="relative bg-cover bg-center bg-no-repeat h-screen text-white scroll-mt-20"
        style="background-image: url('assets/img/inicio-bg.png');">
        <div class="absolute inset-0 bg-black bg-opacity-60"></div>

        <div class="relative z-10 flex items-center justify-center h-full px-6 text-center">
            <div>
                <h1 class="text-4xl md:text-6xl font-bold mb-6 font-sego">Psicología & Bienestar</h1>
                <p class="text-lg md:text-xl mb-8 max-w-2xl mx-auto">
                    Un espacio para el equilibrio emocional, el crecimiento personal y el cuidado de tu salud mental.
                </p>
                <a href="#contacto"
                    class="bg-[#627eff] hover:bg-[#53c6e4] text-white font-semibold py-3 px-6 rounded-full transition duration-300">
                    Contáctanos
                </a>
            </div>
        </div>
    </section>



    <section class="py-16 bg-[#f0f8ff] scroll-mt-20" id="nosotros">
        <div class="max-w-4xl mx-auto text-center">
            <h2 class="text-3xl font-bold text-[#627eff] mb-4">Sobre Nosotros</h2>
            <p class="text-gray-700">
                Somos un equipo de profesionales comprometidos con tu salud mental. Nuestra misión es acompañarte en el
                proceso de autoconocimiento y bienestar, a través de un enfoque humano, empático y basado en evidencia
                científica.
            </p>
        </div>
    </section>


    <section id="servicios" class="py-20 bg-[#66a6da]/5 text-gray-800 scroll-mt-20">
        <div class="max-w-6xl mx-auto px-4">
            <h2 class="text-3xl font-bold text-center mb-12">Nuestros Servicios</h2>

            <div class="grid gap-10 sm:grid-cols-2 lg:grid-cols-3">

                <div class="group perspective shadow-md rounded-lg cursor-pointer">
                    <div class="relative w-full h-80 transition-transform duration-700 transform-style-preserve-3d"
                        id="card1">
                        <div
                            class="absolute w-full h-full backface-hidden bg-white rounded-xl p-6 flex flex-col justify-center items-center text-center border border-gray-200 pulse">
                            <img src="assets/img/inicio_tarjeta.jfif" alt="Imagen Terapia"
                                class="max-h-48 object-contain mb-4">
                            <h3 class="text-xl font-semibold mb-2">Terapia</h3>
                        </div>
                        <div
                            class="absolute w-full h-full backface-hidden rotate-y-180 bg-[#53c6e4] shadow-xl rounded-xl p-6 flex flex-col justify-center items-center text-center text-white">
                            <h3 class="text-lg font-bold mb-3">Terapias</h3>
                            <ul class="text-sm space-y-1">
                                <li>✅ Terapia Individual</li>
                                <li>✅ Terapia de Pareja</li>
                                <li>✅ Terapia Familiar</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="group perspective shadow-md rounded-lg cursor-pointer">
                    <div class="relative w-full h-80 transition-transform duration-700 transform-style-preserve-3d"
                        id="card2">
                        <div
                            class="absolute w-full h-full backface-hidden bg-white rounded-xl p-6 flex flex-col justify-center items-center text-center border border-gray-200 pulse">
                            <img src="assets/img/inicio_3.jpeg" alt="Imagen Instituciones"
                                class="max-h-48 object-contain mb-4">
                            <h3 class="text-xl font-semibold mb-2">Orientación Vocacional</h3>
                        </div>
                        <div
                            class="absolute w-full h-full backface-hidden rotate-y-180 bg-[#53c6e4] shadow-xl rounded-xl p-6 overflow-y-auto text-center text-white">
                            <h3 class="text-lg font-bold mb-2">Orientación Vocacional</h3>
                            <ul class="text-sm space-y-1 mb-4">
                                <li>🧠 Evaluación de Habilidades</li>
                                <li>🔍 Análisis de Intereses</li>
                                <li>🤝 Fortalecimiento de habilidades blandas</li>
                            </ul>
                            <h4 class="font-semibold mb-1">Beneficios:</h4>
                            <ul class="text-sm space-y-1">
                                <li>🎯 Claridad sobre tu elección de carrera</li>
                                <li>📈 Incremento de la satisfacción y éxito profesional</li>
                                <li>🛠️ Estrategias para superar obstáculos</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="group perspective shadow-md rounded-lg cursor-pointer">
                    <div class="relative w-full h-80 transition-transform duration-700 transform-style-preserve-3d"
                        id="card3">
                        <div
                            class="absolute w-full h-full backface-hidden bg-white rounded-xl p-6 flex flex-col justify-center items-center text-center border border-gray-200 pulse">
                            <img src="assets/img_empresarial/empresarial_1.jpeg" alt="Imagen Talleres"
                                class="max-h-48 object-contain mb-4">
                            <h3 class="text-xl font-semibold mb-2">Talleres & Charlas</h3>
                        </div>
                        <div
                            class="absolute w-full h-full backface-hidden rotate-y-180 bg-[#53c6e4] shadow-xl rounded-xl p-6 flex flex-col justify-center items-center text-center text-white">
                            <h3 class="text-lg font-bold mb-3">Actividades:</h3>
                            <ul class="text-sm space-y-1">
                                <li>🎨 Talleres Lúdicos Preventivos</li>
                                <li>📘 Talleres Pedagógicos</li>
                                <li>👨‍👩‍👧 Taller de Padres</li>
                            </ul>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <div class="mt-10 text-center">
            <a href="servicios-empresariales.html"
                class="inline-block bg-[#627eff] hover:bg-[#53c6e4] text-white font-semibold py-3 px-8 rounded-full shadow-md transition duration-300 ease-in-out">
                Conoce nuestros Servicios Empresariales
            </a>
        </div>

    </section>
    <script>
        // Función para voltear la tarjeta
        function flipCard(id) {
            const card = document.getElementById(id);
            card.classList.toggle("rotate-y-180");
        }

        // Agrega un event listener a cada contenedor de la tarjeta para voltear al hacer clic
        const serviceCards = document.querySelectorAll('.group');
        serviceCards.forEach(card => {
            card.addEventListener('click', function () {
                const cardId = this.querySelector('.transition-transform').id;
                flipCard(cardId);
            });
        });
    </script>
    <section class="py-16 bg-[#f8fbff] scroll-mt-20" id="equipo">
        <div class="max-w-5xl mx-auto">
            <h2 class="text-3xl font-bold text-[#627eff] text-center mb-10">Nuestro Equipo</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                <div>
                    <img src="assets/sindy_team.png" alt="Psicóloga 1"
                        class="w-100 h-auto mx-auto mb-4 rounded-lg shadow-md">
                    <h3 class="font-semibold">Sindy Margarita Garrido</h3>
                    <p class="text-sm text-gray-600">Psicóloga Especialista en Desarrollo Integral de la Infancia y
                        Adolescencia</p>
                </div>
                <div>
                    <img src="assets/felipe_team.png" alt="Psicólogo 2"
                        class="w-100 h-auto mx-auto mb-4 rounded-lg shadow-md">
                    <h3 class="font-semibold">Manuel Felipe Ascencio Tellez</h3>
                    <p class="text-sm text-gray-600">Psicólogo con Enfoque Social y Gestión de Proyectos</p>
                </div>
                <div>
                    <img src="assets/viviana_team.png" alt="Psicóloga 3"
                        class="w-100 h-auto mx-auto mb-4 rounded-lg shadow-md">
                    <h3 class="font-semibold">Viviana Quiroga Corredor</h3>
                    <p class="text-sm text-gray-600">Psicóloga en Atención a Víctimas de Violencia Sexual y Diplomado en
                        Psicología Clínica</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonios -->
    <!-- SECCIÓN DE TESTIMONIOS (CAROUSEL) -->
    <section class="py-16 bg-white scroll-mt-20" id="testimonios">
        <div class="max-w-5xl mx-auto px-6 md:px-0"> <h2 class="text-3xl md:text-4xl font-bold text-[#627eff] text-center mb-10">Comentarios / Testimonios</h2>
            <div class="relative">
                <div id="carousel-container" class="overflow-hidden">
                    <div id="carousel-wrapper" class="flex transition-transform duration-300 ease-in-out">
                        </div>
                </div>
                <button id="prev-testimonial"
                    class="absolute left-0 md:left-2 top-1/2 transform -translate-y-1/2 bg-[#627eff] hover:bg-[#53c6e4] text-white font-bold py-2 px-3 rounded-full z-10 shadow-md">
                    &lt;
                </button>
                <button id="next-testimonial"
                    class="absolute right-0 md:right-2 top-1/2 transform -translate-y-1/2 bg-[#627eff] hover:bg-[#53c6e4] text-white font-bold py-2 px-3 rounded-full z-10 shadow-md">
                    &gt;
                </button>
            </div>
            <div class="mt-10 text-center">
                <a href="page/testimonios-completos.html"
                    class="inline-block bg-[#627eff] hover:bg-[#53c6e4] text-white px-6 py-3 rounded-lg transition shadow-lg font-semibold">
                    Ver todos los comentarios
                </a>
            </div>
        </div>
    </section>
    <script>
        // NOTA: Otros scripts para el menú móvil, formulario de contacto, etc., deben estar SEPARADOS de este script.
        // Este script maneja ÚNICAMENTE el carrusel de testimonios en index.html.

        const googleSheetURL_index = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQ9gc0iLBVHnuWopuxijsTupBn_tvZ-B7D3b4WBVZ-meyKF61a8o24Qy1FQ5fxUYL7DaabkkAgILjac/pub?gid=421205038&single=true&output=csv';
        const testimoniosContainer_index = document.getElementById('carousel-wrapper');
        let allTestimonials_index = [];
        let currentIndex_index = 0;
        let itemsPerPage_index = 4; // Por defecto para escritorio (2 filas de 2)
        const maxTestimonials_index = 12; // Limitar el carrusel a los primeros 12

        // Función para determinar itemsPerPage basado en el tamaño de la pantalla
        function updateItemsPerPage_index() {
             if (window.innerWidth <= 480) {
                 itemsPerPage_index = 1; // 1 item por página en móvil
             } else if (window.innerWidth <= 768) {
                  itemsPerPage_index = 2; // 2 items por página en tablet (1 fila de 2)
             } else {
                 itemsPerPage_index = 4; // 4 items por página en escritorio (2 filas de 2)
             }
        }

        // Llamar al inicio para establecer itemsPerPage inicial
        updateItemsPerPage_index();


        function showTestimonials_index(index) {
            if (!testimoniosContainer_index) {
                 console.error("Error: Elemento con ID 'carousel-wrapper' no encontrado en index.html.");
                 return;
            }
            testimoniosContainer_index.innerHTML = '';
            const startIndex = index * itemsPerPage_index;
            const endIndex = Math.min(startIndex + itemsPerPage_index, allTestimonials_index.length);

            // Determinar cuántos testimonios mostrar por fila en el diseño flexbox
            // 2 por fila flexbox solo si itemsPerPage es 4 (escritorio), de lo contrario 1
            const testimonialsPerFlexRow = (itemsPerPage_index === 4 && window.innerWidth > 768) ? 2 : 1;


            // Lógica para renderizar testimonios, manejando 1 item por página o múltiples por página/fila
            if (itemsPerPage_index === 1) { // Vista móvil (1 testimonio por página)
                 for (let i = startIndex; i < endIndex; i++) {
                     const testimonioData = allTestimonials_index[i];
                     const fechaStr = testimonioData["Fecha"];
                     let formattedDate = 'Fecha Inválida';
                     // Lógica de análisis de fecha (igual que antes)
                     if (fechaStr) {
                         const parts = fechaStr.split('/');
                         if (parts.length === 3) {
                              const day = parseInt(parts[0]);
                              const month = parseInt(parts[1]) - 1; // JavaScript months are 0-indexed
                              const year = parseInt(parts[2]);
                              const date = new Date(year, month, day);
                              if (!isNaN(date.getTime())) { // Verificar si la fecha es válida
                                   formattedDate = date.toLocaleDateString('es-CO', { year: 'numeric', month: 'numeric', day: 'numeric' });
                              } else {
                                   console.error("Fecha inválida construida desde partes:", fechaStr);
                               }
                         } else {
                              console.error("Formato de fecha incorrecto al dividir:", fechaStr);
                         }
                     } else {
                         console.warn("La cadena de fecha está vacía para un testimonio.");
                     }

                     let ratingDisplay = '';
                     const ratingValue = testimonioData["Calificación"];
                     // Lógica de visualización de calificación (igual que antes)
                     if (ratingValue && !isNaN(parseInt(ratingValue))) { // Verificar si hay valor antes de parseInt
                          const numStars = parseInt(ratingValue);
                          for (let k = 0; k < numStars; k++) { // Usar 'k' para evitar conflicto
                               ratingDisplay += '★';
                          }
                     } else if (ratingValue) {
                          ratingDisplay = ratingValue;
                     }

                     // Estructura HTML para una sola tarjeta de testimonio
                     const testimonioHTML = `
                          <div class="bg-gray-100 rounded-lg p-6 shadow-md flex-shrink-0" style="width: 100%;"> {/* Flex-shrink-0 y width para el item del carrusel en móvil */}
                              <div class="flex justify-between items-center mb-2">
                                  <p class="text-sm font-semibold text-[#627eff]">- ${testimonioData["Nombre Completo"]}</p>
                                  ${ratingDisplay ? `<div class="text-yellow-500">${ratingDisplay}</div>` : ''}
                              </div>
                              <p class="text-gray-700 italic mb-2"><span class="math-inline">\{testimonioData\["Tu Testimonio"\]\}</p\>
<p class\="text\-xs text\-gray\-500"\></span>{formattedDate}</p>
                          </div>
                     `;
                     testimoniosContainer_index.innerHTML += testimonioHTML; // Añadir directamente para 1 item por página
                 }

            } else { // Vista Tablet/Escritorio (2 o 4 items por página, organizados en filas flex)

                const totalRows = Math.ceil((endIndex - startIndex) / testimonialsPerFlexRow);

                for (let row = 0; row < totalRows; row++) {
                    const rowContainer = document.createElement('div');
                    rowContainer.classList.add('flex', 'gap-6', 'mb-4'); // Contenedor de fila flex

                    for (let col = 0; col < testimonialsPerFlexRow; col++) {
                         const currentTestimonioIndex = startIndex + row * testimonialsPerFlexRow + col;
                         if (currentTestimonioIndex < endIndex) {
                              const testimonioData = allTestimonials_index[currentTestimonioIndex];

                              const fechaStr = testimonioData["Fecha"];
                              let formattedDate = 'Fecha Inválida';
                              // Lógica de análisis de fecha (igual que antes)
                              if (fechaStr) {
                                  const parts = fechaStr.split('/');
                                  if (parts.length === 3) {
                                       const day = parseInt(parts[0]);
                                       const month = parseInt(parts[1]) - 1;
                                       const year = parseInt(parts[2]);
                                       const date = new Date(year, month, day);
                                       if (!isNaN(date.getTime())) { // Verificar si la fecha es válida
                                            formattedDate = date.toLocaleDateString('es-CO', { year: 'numeric', month: 'numeric', day: 'numeric' });
                                       } else {
                                            console.error("Fecha inválida construida desde partes:", fechaStr);
                                       }
                                  } else {
                                       console.error("Formato de fecha incorrecto al dividir:", fechaStr);
                                  }
                              } else {
                                  console.warn("La cadena de fecha está vacía para un testimonio.");
                              }

                              let ratingDisplay = '';
                              const ratingValue = testimonioData["Calificación"];
                              // Lógica de visualización de calificación (igual que antes)
                              if (ratingValue && !isNaN(parseInt(ratingValue))) {
                                  const numStars = parseInt(ratingValue);
                                  for (let k = 0; k < numStars; k++) {
                                       ratingDisplay += '★';
                                  }
                              } else if (ratingValue) {
                                  ratingDisplay = ratingValue;
                              }

                              // Estructura HTML para una sola tarjeta de testimonio
                              const testimonioHTML = `
                                  <div class="bg-gray-100 rounded-lg p-6 shadow-md flex-1"> {/* Flex-1 para items dentro de la fila flex */}
                                      <div class="flex justify-between items-center mb-2">
                                          <p class="text-sm font-semibold text-[#627eff]">- ${testimonioData["Nombre Completo"]}</p>
                                          ${ratingDisplay ? `<div class="text-yellow-500">${ratingDisplay}</div>` : ''}
                                      </div>
                                      <p class="text-gray-700 italic mb-2"><span class="math-inline">\{testimonioData\["Tu Testimonio"\]\}</p\>
<p class\="text\-xs text\-gray\-500"\></span>{formattedDate}</p>
                                  </div>
                              `;
                              rowContainer.innerHTML += testimonioHTML; // Añadir al contenedor de fila flex

                         } else {
                              // Añadir un div vacío para mantener el diseño flex si es necesario en la última fila
                              rowContainer.innerHTML += '<div class="flex-1"></div>';
                         }
                    }
                    testimoniosContainer_index.appendChild(rowContainer); // Añadir la fila al wrapper
                }
                // Eliminar la última fila si solo contiene divs vacíos
                 if (testimoniosContainer_index.lastChild && testimoniosContainer_index.lastChild.classList.contains('flex') && testimoniosContainer_index.lastChild.innerHTML.trim() === '<div class="flex-1"></div>'.repeat(testimonialsPerFlexRow).trim()) {
                    testimoniosContainer_index.removeChild(testimoniosContainer_index.lastChild);
                 }

            }


            // Ajustar la transformación del wrapper para la paginación del carrusel
            // Esto se basa en la anchura del contenedor visible
            const wrapperWidth = testimoniosContainer_index.clientWidth;
            const offset = -currentIndex_index * wrapperWidth;
            testimoniosContainer_index.style.transform = `translateX(${offset}px)`;

        }

        function updateNavigationButtons_index() {
            const prevButton = document.getElementById('prev-testimonial');
            const nextButton = document.getElementById('next-testimonial');
            // La lógica del número total de páginas debe basarse en itemsPerPage
            const totalPages = Math.ceil(allTestimonials_index.length / itemsPerPage_index);


            if (prevButton) prevButton.disabled = currentIndex_index === 0;
            if (nextButton) nextButton.disabled = currentIndex_index >= totalPages - 1;
        }

        function nextTestimonials_index() {
            const totalPages = Math.ceil(allTestimonials_index.length / itemsPerPage_index);
            currentIndex_index = Math.min(currentIndex_index + 1, totalPages - 1);
             showTestimonials_index(currentIndex_index); // Volver a renderizar el contenido para la página actual
            // No es necesario transformar manualmente aquí, showTestimonials_index lo maneja
            updateNavigationButtons_index();
            resetAutoSlide_index();
        }

        function prevTestimonials_index() {
            currentIndex_index = Math.max(currentIndex_index - 1, 0);
             showTestimonials_index(currentIndex_index); // Volver a renderizar el contenido para la página actual
             // No es necesario transformar manualmente aquí, showTestimonials_index lo maneja
            updateNavigationButtons_index();
            resetAutoSlide_index();
        }

        let autoSlideInterval_index;
        const autoSlideDelay_index = 5000; // 5 segundos

        function startAutoSlide_index() {
            stopAutoSlide_index(); // Asegurarse de que no haya múltiples intervalos corriendo
            autoSlideInterval_index = setInterval(() => {
                const totalPages = Math.ceil(allTestimonials_index.length / itemsPerPage_index);
                if (totalPages > 1) {
                   currentIndex_index = (currentIndex_index + 1) % totalPages; // Ciclar al siguiente índice
                    showTestimonials_index(currentIndex_index); // Volver a renderizar para la siguiente página
                   updateNavigationButtons_index();
                } else {
                    stopAutoSlide_index(); // Detener auto-slide si solo hay una página
                }
            }, autoSlideDelay_index);
        }


        function stopAutoSlide_index() {
            clearInterval(autoSlideInterval_index);
        }

        function resetAutoSlide_index() {
            stopAutoSlide_index();
            startAutoSlide_index();
        }

        document.addEventListener('DOMContentLoaded', function() {
             // Recalcular itemsPerPage al cargar el DOM
             updateItemsPerPage_index();


            fetch(googleSheetURL_index)
                .then(response => response.text())
                .then(csvData => {
                     // Lógica mejorada de análisis de CSV para intentar manejar comas y espacios
                    const rows = csvData.split('\n').map(row => row.trim()).filter(row => row.length > 0); // Filtrar filas vacías
                    if (rows.length <= 1) {
                        if (testimoniosContainer_index) testimoniosContainer_index.innerHTML = '<p>No hay testimonios disponibles.</p>';
                         const prevButton = document.getElementById('prev-testimonial');
                         const nextButton = document.getElementById('next-testimonial');
                         if (prevButton) prevButton.disabled = true;
                         if (nextButton) nextButton.disabled = true;
                         stopAutoSlide_index();
                        return;
                    }

                    // Leer encabezados y trimar espacios
                    const headers = rows[0].split(',').map(header => header.trim());
                    const nombreIndex = headers.indexOf('Nombre Completo');
                    const testimonioIndex = headers.indexOf('Tu Testimonio');
                    const calificacionIndex = headers.indexOf('Calificación');
                    const fechaIndex = headers.indexOf('Fecha');

                    console.log("index.html - Encabezados detectados:", headers);
                    console.log("index.html - Índice Nombre Completo:", nombreIndex);
                    console.log("index.html - Índice Tu Testimonio:", testimonioIndex);
                    console.log("index.html - Índice Calificación:", calificacionIndex);
                    console.log("index.html - Índice Fecha:", fechaIndex);


                    if (nombreIndex === -1 || testimonioIndex === -1 || calificacionIndex === -1 || fechaIndex === -1) {
                        console.error('index.html - Las columnas necesarias ("Nombre Completo", "Tu Testimonio", "Calificación", "Fecha") no se encontraron en el CSV.');
                         if (testimoniosContainer_index) testimoniosContainer_index.innerHTML = '<p class="text-red-500">Error al leer los testimonios (columnas no encontradas).</p>';
                         const prevButton = document.getElementById('prev-testimonial');
                         const nextButton = document.getElementById('next-testimonial');
                         if (prevButton) prevButton.disabled = true;
                         if (nextButton) nextButton.disabled = true;
                         stopAutoSlide_index();
                        return;
                    }

                    const fetchedTestimonials = [];
                    for (let i = 1; i < rows.length; i++) {
                         const row = rows[i];
                         // Intentar parsear la fila CSV manualmente para manejar comas dentro de comillas dobles
                         const values = [];
                         let inQuotes = false;
                         let currentValue = '';
                         for (let j = 0; j < row.length; j++) {
                             const char = row[j];

                             if (char === '"' && (j === 0 || row[j-1] === ',' || /\s/.test(row[j-1]))) {
                                 inQuotes = true;
                                 continue;
                             }
                              if (char === '"' && (j === row.length - 1 || row[j+1] === ',' || /\s/.test(row[j+1]))) {
                                 inQuotes = false;
                                 continue;
                             }
                             if (char === ',' && !inQuotes) {
                                 values.push(currentValue.trim());
                                 currentValue = '';
                             } else {
                                 currentValue += char;
                             }
                         }
                         values.push(currentValue.trim());


                         if (values.length > Math.max(nombreIndex, testimonioIndex, calificacionIndex, fechaIndex) &&
                             nombreIndex !== -1 && testimonioIndex !== -1 && calificacionIndex !== -1 && fechaIndex !== -1) {

                            const testimonioData = {};
                            testimonioData["Nombre Completo"] = values[nombreIndex];
                            testimonioData["Tu Testimonio"] = values[testimonioIndex];
                            testimonioData["Calificación"] = values[calificacionIndex];
                            testimonioData["Fecha"] = values[fechaIndex];

                            fetchedTestimonials.push(testimonioData);

                            console.log("index.html - Datos del testimonio (fila", i, "):", testimonioData);

                         } else {
                             console.warn("index.html - Saltando fila con datos incompletos, índices inválidos o error de parseo:", row);
                         }
                    }

                    allTestimonials_index = fetchedTestimonials;

                    // Limitar a los primeros 12 testimonios para el carrusel
                    if (allTestimonials_index.length > maxTestimonials_index) {
                         allTestimonials_index = allTestimonials_index.slice(0, maxTestimonials_index);
                    }

                     // Si después de limitar no hay testimonios, mostrar mensaje y deshabilitar botones
                     if (allTestimonials_index.length === 0) {
                         if (testimoniosContainer_index) testimoniosContainer_index.innerHTML = '<p>No hay testimonios disponibles.</p>';
                         const prevButton = document.getElementById('prev-testimonial');
                         const nextButton = document.getElementById('next-testimonial');
                         if (prevButton) prevButton.disabled = true;
                         if (nextButton) nextButton.disabled = true;
                         stopAutoSlide_index();
                         return;
                     }


                    showTestimonials_index(currentIndex_index); // Renderizar la primera página de testimonios
                    updateNavigationButtons_index();
                    startAutoSlide_index(); // Iniciar el carrusel automático


                     // Añadir listener para redimensionamiento para ajustar itemsPerPage y recargar la vista del carrusel
                     window.addEventListener('resize', () => {
                          const oldItemsPerPage = itemsPerPage_index;
                          updateItemsPerPage_index(); // Recalcular itemsPerPage
                          // Solo volver a renderizar si itemsPerPage realmente cambió
                          if (itemsPerPage_index !== oldItemsPerPage) {
                              currentIndex_index = 0; // Resetear índice a 0 cuando cambia el diseño
                              showTestimonials_index(currentIndex_index);
                              updateNavigationButtons_index();
                              resetAutoSlide_index(); // Reiniciar auto-slide
                          }
                     });


                })
                .catch(error => {
                    console.error('index.html - Error al obtener los testimonios desde Google Sheets (CSV):', error);
                     if (testimoniosContainer_index) testimoniosContainer_index.innerHTML = '<p class="text-red-500">No se pudieron cargar los testimonios (error de red o CSV).</p>';
                     const prevButton = document.getElementById('prev-testimonial');
                     const nextButton = document.getElementById('next-testimonial');
                     if (prevButton) prevButton.disabled = true;
                     if (nextButton) nextButton.disabled = true;
                     stopAutoSlide_index();
                });

            const prevButton = document.getElementById('prev-testimonial');
            const nextButton = document.getElementById('next-testimonial');

            // Añadir event listeners solo si los botones existen
            if (prevButton) prevButton.addEventListener('click', prevTestimonials_index); // Botón izquierdo -> Anterior
            if (nextButton) nextButton.addEventListener('click', nextTestimonials_index); // Botón derecho -> Siguiente


            // Manejar eventos de hover en el contenedor del carrusel para pausar el auto-slide
            const carouselContainerElement = document.getElementById('carousel-container');
            if (carouselContainerElement) {
                 carouselContainerElement.addEventListener('mouseenter', stopAutoSlide_index);
                 carouselContainerElement.addEventListener('mouseleave', startAutoSlide_index);
            } else {
                 console.warn("index.html - Elemento #carousel-container no encontrado. El auto-slide no se pausará al pasar el ratón.");
            }


        });
    </script>
    <!-- Fin -->

    <div class="mt-20 max-w-2xl mx-auto bg-[#53c6e4]/5 shadow-lg rounded-xl p-6 scroll-mt-20" id="contacto">
        <h2 class="text-2xl font-semibold text-[#627eff] mb-4 text-center">Contáctanos</h2>

        <div id="successMessage"
            class="hidden text-green-700 bg-green-100 border border-green-300 rounded-lg px-4 py-3 mb-4 text-center">
            ¡Gracias por contactarnos! Tu mensaje fue enviado exitosamente.
        </div>

        <form id="contactForm" action="https://formspree.io/f/mblgpnvb" method="POST" class="space-y-4">
            <div>
                <label class="block text-sm font-medium">Nombre</label>
                <input type="text" name="nombre" required
                    class="w-full mt-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#66a6da]" />
            </div>
            <div>
                <label class="block text-sm font-medium">Correo electrónico</label>
                <input type="email" name="email" required
                    class="w-full mt-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#66a6da]" />
            </div>
            <div>
                <label class="block text-sm font-medium">Teléfono</label>
                <input type="tel" name="telefono" pattern="[0-9+ ]+" placeholder="+57 300 123 4567" required
                    class="w-full mt-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#66a6da]" />
            </div>
            <div>
                <label class="block text-sm font-medium">Mensaje</label>
                <textarea name="mensaje" rows="4" required
                    class="w-full mt-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#66a6da]"></textarea>
            </div>
            <button type="submit"
                class="bg-[#627eff] hover:bg-[#53c6e4] text-white px-6 py-2 rounded-lg transition w-full">
                Enviar mensaje
            </button>
        </form>
    </div>

    <script>
        const form = document.getElementById("contactForm");
        const successMessage = document.getElementById("successMessage");

        form.addEventListener("submit", async (e) => {
            e.preventDefault();
            const data = new FormData(form);
            const action = form.getAttribute("action");

            const response = await fetch(action, {
                method: "POST",
                body: data,
                headers: {
                    Accept: "application/json",
                },
            });

            if (response.ok) {
                form.reset();
                successMessage.classList.remove("hidden");
                setTimeout(() => {
                    successMessage.classList.add("hidden");
                }, 5000);
            }
        });
    </script>

    <footer class="bg-[#66a6da] text-white text-center py-8 mt-12">
        <div class="container mx-auto">
            <p class="font-sego text-sm mb-2">Psicología & Bienestar © 2025. Todos los derechos reservados.</p>
        </div>
    </footer>

    <script>
        function flipCard(id) {
            const card = document.getElementById(id);
            card.classList.toggle("rotate-y-180");
        }
    </script>
    <script>
        const menuToggle = document.getElementById("menu-toggle");
        const mobileMenu = document.getElementById("mobile-menu");
        const mobileMenuItems = document.querySelectorAll("#mobile-menu a"); // Selector corregido

        menuToggle.addEventListener("click", () => {
            mobileMenu.classList.toggle("hidden");
        });

        mobileMenuItems.forEach(item => {
            item.addEventListener("click", () => {
                if (window.innerWidth < 768) {
                    mobileMenu.classList.add("hidden");
                }
            });
        });
    </script>



    <div class="fixed top-1/3 left-0 z-40 flex flex-col space-y-3 px-2">
        <a href="https://www.instagram.com/serviciospsicobienestar?utm_source=qr&igsh=NmtoOWFqMnZwMHY1" target="_blank"
            class="group relative flex items-center">
            <div class="bg-pink-500 hover:bg-pink-600 p-3 rounded-r-full shadow-lg transition duration-300">
                <img src="https://cdn.jsdelivr.net/npm/simple-icons@v10/icons/instagram.svg" alt="Instagram"
                    class="w-5 h-5" />
            </div>
            <span
                class="absolute left-12 bg-pink-500 text-white text-xs px-3 py-1 rounded shadow-lg opacity-0 scale-0 group-hover:opacity-100 group-hover:scale-100 transform transition-all duration-300 origin-left whitespace-nowrap">
                Visita nuestro Instagram
            </span>
        </a>

        <a href="https://www.facebook.com/share/1A9WZs7XCb/" target="_blank" class="group relative flex items-center">
            <div class="bg-blue-600 hover:bg-blue-700 p-3 rounded-r-full shadow-lg transition duration-300">
                <img src="https://cdn.jsdelivr.net/npm/simple-icons@v10/icons/facebook.svg" alt="Facebook"
                    class="w-5 h-5" />
            </div>
            <span
                class="absolute left-12 bg-blue-600 text-white text-xs px-3 py-1 rounded shadow-lg opacity-0 scale-0 group-hover:opacity-100 group-hover:scale-100 transform transition-all duration-300 origin-left whitespace-nowrap">
                Visita nuestro Facebook
            </span>
        </a>
    </div>

    <a href="https://wa.me/573164603881" target="_blank" class="fixed bottom-6 right-6 z-50 group">
        <div
            class="relative flex items-center justify-center bg-[#25D366] hover:bg-green-600 w-14 h-14 rounded-full shadow-lg transition-colors duration-300">
            <img src="https://cdn.jsdelivr.net/npm/simple-icons@v10/icons/whatsapp.svg" alt="WhatsApp"
                class="w-7 h-7 text-white" />
            <span
                class="absolute right-16 bg-[#25D366] text-white text-sm px-3 py-1 rounded-lg shadow-lg opacity-0 scale-0 group-hover:opacity-100 group-hover:scale-100 transform transition-all duration-300 origin-right whitespace-nowrap">
                Escríbenos por WhatsApp
            </span>
        </div>
    </a>


</body>

</html>